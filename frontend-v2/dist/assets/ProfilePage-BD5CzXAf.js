import{a as H,r,j as e,v as q,u as U,b as W,L as Y}from"./index-BP-VUWEV.js";import{C as k,b as _,a as P}from"./Card-DnhPg-Cc.js";import{A as $}from"./Alert-C6PvCdCu.js";import{B as y}from"./Button-C88ZZduS.js";import{L as J}from"./LoadingOverlay-BWbUkZry.js";const O=o=>({"es-ES":"EspaÃ±ol (EspaÃ±a)","es-MX":"EspaÃ±ol (MÃ©xico)","es-AR":"EspaÃ±ol (Argentina)","es-CO":"EspaÃ±ol (Colombia)","en-US":"InglÃ©s (Estados Unidos)","en-GB":"InglÃ©s (Reino Unido)","pt-BR":"PortuguÃ©s (Brasil)","fr-FR":"FrancÃ©s","de-DE":"AlemÃ¡n","it-IT":"Italiano"})[o]||o;function Z(){const{isVoiceModeEnabled:o,getVoiceSettings:c,updateVoiceSettings:d,getVoiceStatus:N,isVoiceAvailable:I,speak:w}=H(),[n,u]=r.useState({rate:1,volume:1,pitch:1,voiceName:null,language:"es-ES",style:"general",role:"default"}),[l,S]=r.useState([]),[h,b]=r.useState({}),[f,x]=r.useState(!1),[v,a]=r.useState(""),[g,E]=r.useState([]);r.useEffect(()=>{(async()=>{x(!0),a("");try{C();let t=N();b(t);let i=[];try{await q.loadVoices(),i=q.getAvailableVoices(),t=N(),b(t)}catch(p){console.error("Error loading voices from service:",p),a("Error al cargar las voces desde el servicio")}if(Array.isArray(i)&&i.length>0){console.log("Available voices:",i),S(i);const p=[...new Set(i.map(L=>L.locale).filter(L=>typeof L=="string"&&L.trim().length>0))].sort();console.log("Unique languages:",p),E(p);const T=c();if(T.voiceName&&!i.some(z=>z.name===T.voiceName)){const z=i.filter(B=>B.locale===T.language);z.length>0&&V(z[0].name)}}else console.warn("No voices available"),a("No hay voces disponibles")}catch(t){console.error("Error initializing voice settings:",t),a("Error al inicializar la configuraciÃ³n de voz")}finally{x(!1)}})()},[]);const C=()=>{const s=c();s.language&&(l.some(i=>i.locale===s.language)||(s.language="es-ES",console.log("Resetting to default language: es-ES"))),u(s),console.log("Loaded settings:",s)},j=async(s,t)=>{try{if(s==="language"){if(!l.some(z=>z.locale===t)){console.error("Invalid language selected:",t),a("Error: Idioma no vÃ¡lido");return}const p=l.filter(z=>z.locale===t),T={...n,language:t},L=l.find(z=>z.name===n.voiceName);(!L||L.locale!==t)&&p.length>0&&(T.voiceName=p[0].name,console.log("Selecting new voice for language:",T.voiceName)),u(T),await d(T),a(`Idioma cambiado a ${O(t)}`)}else{const i={...n,[s]:t};u(i),await d(i)}}catch(i){console.error("Error updating settings:",i),a("Error al guardar la configuraciÃ³n")}},V=s=>{console.log("handleVoiceChange called with",s);const t=l.find(i=>i.name===s);if(t){console.log("selectedVoice:",t);const i={...n,voiceName:t.name,language:t.locale};u(i);try{d(i)}catch(p){console.error("Error updating voice settings:",p),a("Error al guardar la voz seleccionada")}}else console.warn("No matching voice found for",s,"availableVoices:",l),a("Error: No se encontrÃ³ la voz seleccionada")},R=async()=>{if(!o){a("Activa el modo de voz primero");return}x(!0),a("");try{await w("Esta es una prueba de voz. Puedes ajustar la velocidad, volumen y tono segÃºn tus preferencias."),a("Prueba de voz completada")}catch(s){a("Error en la prueba de voz: "+s.message)}finally{x(!1)}},D=()=>{const s={rate:1,volume:1,pitch:1,voice:null,language:"es-ES"};u(s),d(s),a("ConfiguraciÃ³n restaurada a valores por defecto")};return I?e.jsx("div",{className:"space-y-6",children:e.jsxs(k,{children:[e.jsxs(_,{children:[e.jsx("h3",{className:"text-xl font-semibold",children:"ConfiguraciÃ³n de Voz"}),e.jsx("p",{className:"text-white/70",children:"Personaliza la voz, velocidad y volumen para una mejor experiencia auditiva."})]}),e.jsxs(P,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-2 text-sm font-medium text-white/80",children:["Idioma ",f?"(Cargando...)":`(${g.length} disponibles)`]}),e.jsx("select",{value:n.language,onChange:s=>j("language",s.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:g.length===0?e.jsx("option",{value:"",children:"Cargando idiomas..."}):g.map(s=>e.jsx("option",{value:s,children:O(s)},s))})]}),v&&e.jsx("div",{className:"text-sm text-yellow-400",children:v}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-white/80",children:"Voz"}),e.jsxs("select",{value:n.voiceName||"",onChange:s=>V(s.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecciona una voz"}),l.filter(s=>s.locale===n.language).map((s,t)=>e.jsx("option",{value:s.name,children:s.displayName?`${s.displayName} ${s.gender?`(${s.gender==="Female"?"Femenina":"Masculina"})`:""}`:`${s.name} ${s.gender?`(${s.gender==="Female"?"Femenina":"Masculina"})`:""}`},t))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-2 text-sm font-medium text-white/80",children:["Velocidad: ",n.rate,"x"]}),e.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:n.rate,onChange:s=>j("rate",parseFloat(s.target.value)),className:"w-full h-2 bg-white/20 rounded-lg appearance-none cursor-pointer slider"}),e.jsxs("div",{className:"flex justify-between text-xs text-white/60 mt-1",children:[e.jsx("span",{children:"0.5x"}),e.jsx("span",{children:"1x"}),e.jsx("span",{children:"2x"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-2 text-sm font-medium text-white/80",children:["Volumen: ",Math.round(n.volume*100),"%"]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:n.volume,onChange:s=>j("volume",parseFloat(s.target.value)),className:"w-full h-2 bg-white/20 rounded-lg appearance-none cursor-pointer slider"}),e.jsxs("div",{className:"flex justify-between text-xs text-white/60 mt-1",children:[e.jsx("span",{children:"0%"}),e.jsx("span",{children:"50%"}),e.jsx("span",{children:"100%"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-2 text-sm font-medium text-white/80",children:["Tono: ",n.pitch]}),e.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:n.pitch,onChange:s=>j("pitch",parseFloat(s.target.value)),className:"w-full h-2 bg-white/20 rounded-lg appearance-none cursor-pointer slider"}),e.jsxs("div",{className:"flex justify-between text-xs text-white/60 mt-1",children:[e.jsx("span",{children:"Bajo"}),e.jsx("span",{children:"Normal"}),e.jsx("span",{children:"Alto"})]})]}),e.jsxs("div",{className:"p-4 bg-white/5 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-white/80 mb-2",children:"Estado del Sistema"}),e.jsxs("div",{className:"text-xs text-white/60 space-y-1",children:[e.jsxs("div",{children:["Disponible: ",h.isAvailable?"âœ… SÃ­":"âŒ No"]}),e.jsxs("div",{children:["Reproduciendo: ",h.isSpeaking?"ðŸ”Š SÃ­":"ðŸ”‡ No"]}),e.jsxs("div",{children:["Voces disponibles: ",Array.isArray(h.availableVoices)?h.availableVoices.length:h.availableVoices||0]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(y,{onClick:R,disabled:f||!o,variant:"primary",children:f?"Probando...":"ðŸ”Š Probar Voz"}),e.jsx(y,{onClick:D,variant:"secondary",children:"ðŸ”„ Restaurar"})]}),v&&e.jsx($,{intent:v.includes("Error")?"error":"success",children:v})]})]})}):e.jsxs(k,{children:[e.jsx(_,{children:e.jsx("h3",{className:"text-xl font-semibold",children:"ConfiguraciÃ³n de Voz"})}),e.jsx(P,{children:e.jsx($,{intent:"warning",children:"La funcionalidad de voz no estÃ¡ disponible en tu navegador. AsegÃºrate de usar un navegador compatible como Chrome, Firefox o Safari."})})]})}function ee(){const{user:o}=U(),{voiceInteractionsService:c}=H(),[d,N]=r.useState([]),[I,w]=r.useState({}),[n,u]=r.useState(!0),[l,S]=r.useState(""),[h,b]=r.useState(""),f=s=>s&&["voice_answer","voice_answer_assemblyai"].includes(s.action),x=s=>{if(!s)return!1;const t=s.metadata||{};return s.action==="voice_answer_assemblyai"||t.assemblyAIProcessed===!0||t.assemblyAIUsed===!0||t.assemblyAIResult&&t.assemblyAIResult.success===!0};r.useEffect(()=>{o&&(v(),a())},[o]);const v=async()=>{if(o){u(!0),S("");try{const s=await c.getUserVoiceHistory(o.uid);N(s)}catch(s){S("Error cargando el historial de voz"),console.error("Error loading voice history:",s)}finally{u(!1)}}},a=async()=>{if(o)try{const s=await c.getUserVoiceStats(o.uid);w(s)}catch(s){console.error("Error loading voice stats:",s)}},g=async()=>{if(o&&confirm("Â¿EstÃ¡s seguro de que quieres eliminar todo tu historial de voz? Esta acciÃ³n no se puede deshacer.")){u(!0),b("");try{await c.deleteUserVoiceHistory(o.uid),N([]),w({total:0,averageDuration:0}),b("Historial eliminado correctamente")}catch(s){S("Error eliminando el historial"),console.error("Error deleting voice history:",s)}finally{u(!1)}}},E=()=>{if(d.length===0){b("No hay historial para exportar");return}const s=JSON.stringify(d,null,2),t=new Blob([s],{type:"application/json"}),i=URL.createObjectURL(t),p=document.createElement("a");p.href=i,p.download=`voice-history-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(i),b("Historial exportado correctamente")},C=s=>s<1e3?`${s}ms`:`${(s/1e3).toFixed(1)}s`,j=s=>{if(!s)return"";if(typeof s=="object"&&s.seconds)return new Date(s.seconds*1e3).toLocaleString("es-ES");const t=new Date(s);return isNaN(t.getTime())?"":t.toLocaleString("es-ES")},V=d.filter(f).length,R=d.filter(s=>f(s)&&x(s)).length,D=s=>({question_read:"Lectura de pregunta",option_read:"Lectura de opciÃ³n",voice_answer:"Respuesta por voz",voice_answer_assemblyai:"Respuesta por voz (AssemblyAI)",settings_changed:"Cambio de configuraciÃ³n",tutorial_start:"Inicio de tutorial",tutorial_step:"Paso de tutorial",tutorial_end:"Fin de tutorial",text_read:"Lectura de texto"})[s]||s;return o?e.jsxs("div",{className:"space-y-6",children:[e.jsxs(k,{children:[e.jsx(_,{children:e.jsx("h3",{className:"text-xl font-semibold",children:"EstadÃ­sticas de Voz"})}),e.jsx(P,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-white/5 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:I.total||0}),e.jsx("div",{className:"text-sm text-white/70",children:"Total de interacciones"})]}),e.jsxs("div",{className:"text-center p-4 bg-white/5 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:I.averageDuration?C(I.averageDuration):"0ms"}),e.jsx("div",{className:"text-sm text-white/70",children:"DuraciÃ³n promedio"})]}),e.jsxs("div",{className:"text-center p-4 bg-white/5 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-400",children:V}),e.jsx("div",{className:"text-sm text-white/70",children:"Respuestas por voz"})]}),e.jsxs("div",{className:"text-center p-4 bg-white/5 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-indigo-400",children:R}),e.jsx("div",{className:"text-sm text-white/70",children:"Resp. por voz (AssemblyAI)"})]})]})})]}),e.jsxs(k,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Historial de Interacciones"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{onClick:E,variant:"secondary",size:"sm",disabled:d.length===0,children:"ðŸ“¥ Exportar"}),e.jsx(y,{onClick:g,variant:"outline",size:"sm",disabled:d.length===0,children:"ðŸ—‘ï¸ Eliminar"})]})]})}),e.jsx(P,{children:n?e.jsx(J,{}):l?e.jsx($,{intent:"error",children:l}):d.length===0?e.jsxs("div",{className:"text-center py-8 text-white/60",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸŽ¤"}),e.jsx("p",{children:"No hay interacciones de voz registradas"}),e.jsx("p",{className:"text-sm",children:"Las interacciones aparecerÃ¡n aquÃ­ cuando uses el modo de voz"})]}):e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:d.map((s,t)=>e.jsxs("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("div",{className:"font-medium text-white/90",children:D(s.action)}),e.jsx("div",{className:"text-xs text-white/60",children:j(s.timestamp)})]}),s.voiceText&&e.jsxs("div",{className:"text-sm text-white/80 mb-2",children:['"',s.voiceText,'"']}),e.jsxs("div",{className:"flex justify-between items-center text-xs text-white/60",children:[e.jsx("div",{children:s.duration>0&&e.jsxs("span",{children:["DuraciÃ³n: ",C(s.duration)]})}),e.jsx("div",{children:s.confidence&&e.jsxs("span",{children:["Confianza: ",Math.round(s.confidence*100),"%"]})})]}),f(s)&&e.jsx("div",{className:"mt-2 text-xs",children:e.jsxs("span",{className:`inline-block px-2 py-1 rounded ${x(s)?"bg-green-500/20 text-green-300 border border-green-500/30":"bg-yellow-500/20 text-yellow-300 border border-yellow-500/30"}`,children:["AssemblyAI: ",x(s)?"SÃ­":"No"]})}),s.metadata&&Object.keys(s.metadata).length>0&&e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"text-xs text-white/60 cursor-pointer",children:"Ver detalles"}),e.jsx("pre",{className:"text-xs text-white/50 mt-1 p-2 bg-black/20 rounded",children:JSON.stringify(s.metadata,null,2)})]})]},t))})})]}),h&&e.jsx($,{intent:h.includes("Error")?"error":"success",children:h})]}):e.jsx(k,{children:e.jsx(P,{children:e.jsx($,{intent:"warning",children:"Debes iniciar sesiÃ³n para ver tu historial de voz."})})})}const F=[{id:"welcome",title:"Bienvenido al Tutorial de Voz",content:"Te damos la bienvenida al tutorial de accesibilidad de BrainBlitz. Este tutorial te enseÃ±arÃ¡ cÃ³mo usar todas las funcionalidades de voz disponibles.",duration:8e3},{id:"voice_mode",title:"Modo de Voz",content:"El modo de voz se activa automÃ¡ticamente si indicaste tener dificultades visuales durante el registro. TambiÃ©n puedes activarlo manualmente desde la barra de navegaciÃ³n.",duration:1e4},{id:"question_reading",title:"Lectura de Preguntas",content:'Cuando aparezca una pregunta, se leerÃ¡ automÃ¡ticamente junto con todas las opciones de respuesta. TambiÃ©n puedes usar el botÃ³n "Leer" para repetir la pregunta.',duration:12e3},{id:"voice_settings",title:"ConfiguraciÃ³n de Voz",content:'Puedes personalizar la voz, velocidad, volumen y tono en la configuraciÃ³n. Usa el botÃ³n "Probar Voz" para escuchar cÃ³mo suenan los cambios.',duration:1e4},{id:"voice_answers",title:"Respuestas por Voz",content:'Puedes responder a las preguntas diciendo "A", "B", "C", "D" o "primera opciÃ³n", "segunda opciÃ³n", etc. El sistema reconocerÃ¡ tu respuesta.',duration:12e3},{id:"voice_history",title:"Historial de Voz",content:"Todas tus interacciones de voz se registran en tu historial personal. Puedes ver estadÃ­sticas de uso y exportar tus datos.",duration:8e3},{id:"navigation",title:"NavegaciÃ³n por Voz",content:"Usa los botones de navegaciÃ³n para moverte por la aplicaciÃ³n. El modo de voz te ayudarÃ¡ a entender quÃ© hace cada botÃ³n.",duration:8e3},{id:"completion",title:"Tutorial Completado",content:"Â¡Felicitaciones! Has completado el tutorial de accesibilidad. Ahora puedes disfrutar de BrainBlitz con todas las funcionalidades de voz activadas.",duration:6e3}];function se({onComplete:o,onSkip:c}){const{isVoiceModeEnabled:d,speak:N,stopSpeaking:I,isVoiceAvailable:w,voiceInteractionsService:n}=H(),{user:u}=U(),[l,S]=r.useState(0),[h,b]=r.useState(!1),[f,x]=r.useState(!1),[v,a]=r.useState(0),[g,E]=r.useState(!1),[C,j]=r.useState(""),V=F[l],R=l===F.length-1,D=l===0;r.useEffect(()=>{d&&w&&!h&&!f&&s()},[d,w]);const s=async()=>{if(!d){j("Activa el modo de voz para usar el tutorial");return}E(!0),j(""),b(!0),x(!1),a(0);try{n&&u?.uid&&await n.logTutorialInteraction(u.uid,0,"start",0),await t(0)}catch(A){j("Error reproduciendo el tutorial: "+A.message),b(!1)}finally{E(!1)}},t=async(A=l)=>{const m=F[A],X=`${m.title}. ${m.content}`;n&&u?.uid&&await n.logTutorialInteraction(u.uid,A,"step",m.duration);const K=setInterval(()=>{a(Q=>{const M=Q+100/(m.duration/100);return M>=100?100:M})},100);try{await N(X,{action:"tutorial_step",questionId:"tutorial",metadata:{stepId:m.id,stepTitle:m.title,stepIndex:A}})}finally{clearInterval(K),a(100)}},i=()=>{I(),x(!0),b(!1)},p=async()=>{x(!1),b(!0),await t()},T=()=>{I(),b(!1),x(!1),a(0)},L=async()=>{if(R){await B();return}S(A=>{const m=A+1;return a(0),h&&t(m),m})},z=async()=>{D||S(A=>{const m=A-1;return a(0),h&&t(m),m})},B=async()=>{E(!0);try{n&&u?.uid&&await n.logTutorialInteraction(u.uid,l,"completed",0),await N("Tutorial completado. Â¡Disfruta de BrainBlitz!",{action:"tutorial_completed",questionId:"tutorial"}),o&&o()}catch(A){j("Error completando el tutorial: "+A.message)}finally{E(!1)}},G=()=>{T(),c&&c()};return w?d?e.jsxs(k,{children:[e.jsxs(_,{children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Tutorial de Accesibilidad"}),e.jsxs("p",{className:"text-white/70",children:["Paso ",l+1," de ",F.length,": ",V.title]})]}),e.jsxs(P,{className:"space-y-6",children:[g&&e.jsx(J,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-white/70",children:[e.jsx("span",{children:"Progreso del paso"}),e.jsxs("span",{children:[Math.round(v),"%"]})]}),e.jsx("div",{className:"w-full bg-white/20 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${v}%`}})})]}),e.jsxs("div",{className:"p-4 bg-white/5 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-white/90 mb-2",children:V.title}),e.jsx("p",{className:"text-white/80 text-sm leading-relaxed",children:V.content})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[!h&&!f&&e.jsx(y,{onClick:s,variant:"primary",children:"â–¶ï¸ Iniciar Tutorial"}),h&&e.jsx(y,{onClick:i,variant:"secondary",children:"â¸ï¸ Pausar"}),f&&e.jsx(y,{onClick:p,variant:"primary",children:"â–¶ï¸ Continuar"}),(h||f)&&e.jsx(y,{onClick:T,variant:"outline",children:"â¹ï¸ Detener"}),!D&&e.jsx(y,{onClick:z,variant:"secondary",children:"â®ï¸ Anterior"}),!R&&e.jsx(y,{onClick:L,variant:"primary",children:"â­ï¸ Siguiente"}),R&&e.jsx(y,{onClick:B,variant:"primary",children:"âœ… Completar"}),e.jsx(y,{onClick:G,variant:"outline",children:"â­ï¸ Omitir Tutorial"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"flex gap-2",children:F.map((A,m)=>e.jsx("button",{onClick:()=>{S(()=>(a(0),h&&t(m),m))},className:`w-3 h-3 rounded-full transition-colors ${m===l?"bg-blue-500":m<l?"bg-green-500":"bg-white/30"}`,title:`Paso ${m+1}: ${F[m].title}`},m))})}),C&&e.jsx($,{intent:"error",children:C})]})]}):e.jsx(k,{children:e.jsx(P,{className:"p-6",children:e.jsx($,{intent:"info",children:e.jsxs("div",{className:"space-y-4 p-4",children:[e.jsx("p",{className:"text-base leading-relaxed",children:"Activa el modo de voz para acceder al tutorial de accesibilidad."}),e.jsx(y,{onClick:()=>window.location.reload(),className:"mt-2",children:"Activar Modo de Voz"})]})})})}):e.jsx(k,{children:e.jsx(P,{children:e.jsx($,{intent:"warning",children:"El tutorial de voz no estÃ¡ disponible en tu navegador. AsegÃºrate de usar un navegador compatible como Chrome, Firefox o Safari."})})})}function le(){const o=W(),{user:c}=U(),{userHasVisualDifficulty:d,isVoiceModeEnabled:N,toggleVoiceMode:I}=H(),[w,n]=r.useState(null),[u,l]=r.useState(""),[S,h]=r.useState(null),[b,f]=r.useState(!0),[x,v]=r.useState("profile");if(r.useEffect(()=>{async function g(){if(!c)return;let E=null;try{const C="http://localhost:5000/api",j=c&&await c.getIdToken(),V=await fetch(`${C}/users/me/stats?uid=${c.uid}`,{headers:{Authorization:j?`Bearer ${j}`:"","Content-Type":"application/json"}});V.ok?(E=await V.json(),h(E)):l(`Error HTTP: ${V.status}`)}catch(C){l("Error de conexiÃ³n: "+C.message)}n(E?.stats||null),f(!1)}g()},[c]),b)return e.jsx("div",{className:"px-4 py-10 min-h-screen container",children:e.jsx(k,{children:e.jsx(P,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4","aria-busy":"true"}),e.jsx("p",{className:"text-white/70",children:"Cargando perfil..."})]})})})});const a=[{id:"profile",label:"Perfil",icon:"ðŸ‘¤"},{id:"voice-settings",label:"ConfiguraciÃ³n de Voz",icon:"ðŸŽ¤"},{id:"voice-history",label:"Historial de Voz",icon:"ðŸ“Š"},{id:"tutorial",label:"Tutorial",icon:"ðŸ“š"}];return e.jsx("div",{className:"container min-h-screen px-4 py-8 pt-24",children:e.jsxs("div",{className:"mx-auto max-w-4xl space-y-6",children:[e.jsx("div",{className:"flex items-center gap-4 mb-4",children:e.jsxs("button",{onClick:()=>o("/dashboard"),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white/70 hover:text-white bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-400","aria-label":"Volver al dashboard",children:[e.jsx("span",{className:"text-lg",children:"â†"}),e.jsx("span",{children:"Volver al Dashboard"})]})}),e.jsx(k,{children:e.jsxs(_,{className:"flex items-center gap-6 p-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:`https://api.dicebear.com/7.x/identicon/svg?seed=${c?.uid||"user"}`,alt:"Avatar del usuario",className:"bg-white/10 rounded-full w-20 h-20 flex-shrink-0 border-2 border-white/20",loading:"lazy",decoding:"async"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-2 border-white/20 flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"font-bold text-2xl mb-2 text-white",children:c?.displayName||c?.email}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsxs("span",{className:"text-white/60 text-sm font-mono",children:["UID: ",c?.uid?.slice(0,8),"..."]}),d&&e.jsx("span",{className:"px-3 py-1 bg-blue-500/20 text-blue-300 text-xs rounded-full border border-blue-500/30",children:"â™¿ Accesibilidad habilitada"}),e.jsx("button",{onClick:I,className:`px-3 py-1 rounded-full text-xs font-semibold transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-400 ${N?"bg-green-500/20 text-green-300 border border-green-500/30":"bg-gray-500/20 text-gray-300 border border-gray-500/30 hover:bg-green-500/20 hover:text-green-300 hover:border-green-500/30"}`,"aria-pressed":N,type:"button",children:N?"ðŸŽ¤ Modo de voz activo":"ðŸŽ¤ Activar modo de voz"})]})]})]})}),e.jsx("div",{className:"flex flex-wrap gap-1 border-b border-white/10 bg-white/5 rounded-t-lg p-1",role:"tablist","aria-label":"NavegaciÃ³n del perfil",children:a.map(g=>e.jsxs("button",{onClick:()=>v(g.id),className:`px-4 py-3 text-sm font-medium transition-all duration-200 rounded-lg flex items-center gap-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 focus:ring-offset-gray-900 ${x===g.id?"bg-blue-500/20 text-blue-300 border border-blue-500/30 shadow-lg":"text-white/70 hover:text-white/90 hover:bg-white/10 border border-transparent"}`,role:"tab","aria-selected":x===g.id,"aria-controls":`tabpanel-${g.id}`,id:`tab-${g.id}`,children:[e.jsx("span",{className:"text-base","aria-hidden":"true",children:g.icon}),e.jsx("span",{children:g.label})]},g.id))}),x==="profile"&&e.jsxs(k,{role:"tabpanel",id:"tabpanel-profile","aria-labelledby":"tab-profile",children:[e.jsx(_,{className:"pb-4",children:e.jsxs("h3",{className:"text-xl font-semibold text-white flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:"ðŸ“Š"}),"EstadÃ­sticas del Juego"]})}),e.jsxs(P,{children:[u&&e.jsx($,{intent:"error",className:"mb-4",children:u}),e.jsxs("div",{className:"mb-6",children:[e.jsx(Y,{to:"/face-register",children:e.jsx(y,{variant:"secondary",size:"md",className:"w-full sm:w-auto",children:"ðŸ“¸ Registrar Reconocimiento Facial"})}),e.jsx("p",{className:"text-white/60 text-sm mt-2",children:"Habilita el login facial para acceder mÃ¡s rÃ¡pido a tu cuenta"})]}),w?e.jsxs("div",{className:"gap-4 grid grid-cols-1 sm:grid-cols-3",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-blue-600/20 px-6 py-5 border border-blue-500/20 rounded-xl hover:border-blue-400/30 transition-all duration-200 group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-blue-300 text-sm font-medium",children:"Partidas jugadas"}),e.jsx("span",{className:"text-blue-400 text-lg",children:"ðŸŽ®"})]}),e.jsx("div",{className:"font-bold text-3xl text-white group-hover:text-blue-100 transition-colors",children:w.gamesPlayed})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500/10 to-green-600/20 px-6 py-5 border border-green-500/20 rounded-xl hover:border-green-400/30 transition-all duration-200 group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-green-300 text-sm font-medium",children:"Victorias"}),e.jsx("span",{className:"text-green-400 text-lg",children:"ðŸ†"})]}),e.jsx("div",{className:"font-bold text-3xl text-white group-hover:text-green-100 transition-colors",children:w.wins})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-purple-600/20 px-6 py-5 border border-purple-500/20 rounded-xl hover:border-purple-400/30 transition-all duration-200 group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-purple-300 text-sm font-medium",children:"Respuestas correctas"}),e.jsx("span",{className:"text-purple-400 text-lg",children:"âœ…"})]}),e.jsx("div",{className:"font-bold text-3xl text-white group-hover:text-purple-100 transition-colors",children:w.correctAnswers})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“ˆ"}),e.jsx("p",{className:"text-white/70 text-lg mb-4",children:"No hay estadÃ­sticas disponibles"}),e.jsx("p",{className:"text-white/50 text-sm",children:"Â¡Juega algunas partidas para ver tus estadÃ­sticas aquÃ­!"}),S&&e.jsxs("details",{className:"mt-6",children:[e.jsx("summary",{className:"underline cursor-pointer text-blue-400 hover:text-blue-300",children:"Ver respuesta de la API"}),e.jsx("pre",{className:"bg-black/40 mt-3 p-4 rounded-xl overflow-auto text-xs text-white/80 border border-white/10",children:JSON.stringify(S,null,2)})]})]})]})]}),x==="voice-settings"&&e.jsx(Z,{}),x==="voice-history"&&e.jsx(ee,{}),x==="tutorial"&&e.jsx(se,{onComplete:()=>v("profile"),onSkip:()=>v("profile")})]})})}export{le as default};
//# sourceMappingURL=ProfilePage-BD5CzXAf.js.map
