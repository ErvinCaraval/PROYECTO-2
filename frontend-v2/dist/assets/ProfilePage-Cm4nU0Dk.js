import{a as H,r as l,j as e,v as q,u as U,b as W,L as Y}from"./index-BOaVjrce.js";import{C as k,b as _,a as $}from"./Card-Bn8pnOgw.js";import{A as R}from"./Alert-BchDzBqE.js";import{B as y}from"./Button-D2tu_0bI.js";import{L as J}from"./LoadingOverlay-rVvsqzvW.js";const O=d=>({"es-ES":"EspaÃ±ol (EspaÃ±a)","es-MX":"EspaÃ±ol (MÃ©xico)","es-AR":"EspaÃ±ol (Argentina)","es-CO":"EspaÃ±ol (Colombia)","en-US":"InglÃ©s (Estados Unidos)","en-GB":"InglÃ©s (Reino Unido)","pt-BR":"PortuguÃ©s (Brasil)","fr-FR":"FrancÃ©s","de-DE":"AlemÃ¡n","it-IT":"Italiano"})[d]||d;function Z(){const{isVoiceModeEnabled:d,getVoiceSettings:a,updateVoiceSettings:u,getVoiceStatus:S,isVoiceAvailable:I,speak:w}=H(),[o,i]=l.useState({rate:1,volume:1,pitch:1,voiceName:null,language:"es-ES",style:"general",role:"default"}),[c,E]=l.useState([]),[h,b]=l.useState({}),[v,x]=l.useState(!1),[j,r]=l.useState(""),[L,g]=l.useState([]);l.useEffect(()=>{(async()=>{x(!0),r("");try{N();let t=S();b(t);let n=[];try{await q.loadVoices(),n=q.getAvailableVoices(),t=S(),b(t)}catch(p){console.error("Error loading voices from service:",p),r("Error al cargar las voces desde el servicio")}if(Array.isArray(n)&&n.length>0){console.log("Available voices:",n),E(n);const p=[...new Set(n.map(P=>P.locale).filter(P=>typeof P=="string"&&P.trim().length>0))].sort();console.log("Unique languages:",p),g(p);const T=a();if(T.voiceName&&!n.some(V=>V.name===T.voiceName)){const V=n.filter(B=>B.locale===T.language);V.length>0&&A(V[0].name)}}else console.warn("No voices available"),r("No hay voces disponibles")}catch(t){console.error("Error initializing voice settings:",t),r("Error al inicializar la configuraciÃ³n de voz")}finally{x(!1)}})()},[]);const N=()=>{const s=a();s.language&&(c.some(n=>n.locale===s.language)||(s.language="es-ES",console.log("Resetting to default language: es-ES"))),i(s),console.log("Loaded settings:",s)},f=async(s,t)=>{try{if(s==="language"){if(!c.some(V=>V.locale===t)){console.error("Invalid language selected:",t),r("Error: Idioma no vÃ¡lido");return}const p=c.filter(V=>V.locale===t),T={...o,language:t},P=c.find(V=>V.name===o.voiceName);(!P||P.locale!==t)&&p.length>0&&(T.voiceName=p[0].name,console.log("Selecting new voice for language:",T.voiceName)),i(T),await u(T),r(`Idioma cambiado a ${O(t)}`)}else{const n={...o,[s]:t};i(n),await u(n)}}catch(n){console.error("Error updating settings:",n),r("Error al guardar la configuraciÃ³n")}},A=s=>{console.log("handleVoiceChange called with",s);const t=c.find(n=>n.name===s);if(t){console.log("selectedVoice:",t);const n={...o,voiceName:t.name,language:t.locale};i(n);try{u(n)}catch(p){console.error("Error updating voice settings:",p),r("Error al guardar la voz seleccionada")}}else console.warn("No matching voice found for",s,"availableVoices:",c),r("Error: No se encontrÃ³ la voz seleccionada")},C=async()=>{if(!d){r("Activa el modo de voz primero");return}x(!0),r("");try{await w("Esta es una prueba de voz. Puedes ajustar la velocidad, volumen y tono segÃºn tus preferencias."),r("Prueba de voz completada")}catch(s){r("Error en la prueba de voz: "+s.message)}finally{x(!1)}},D=()=>{const s={rate:1,volume:1,pitch:1,voice:null,language:"es-ES"};i(s),u(s),r("ConfiguraciÃ³n restaurada a valores por defecto")};return I?e.jsx("div",{className:"space-y-6",children:e.jsxs(k,{children:[e.jsxs(_,{children:[e.jsx("h3",{className:"text-xl font-semibold",children:"ConfiguraciÃ³n de Voz"}),e.jsx("p",{className:"text-white/70",children:"Personaliza la voz, velocidad y volumen para una mejor experiencia auditiva."})]}),e.jsxs($,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-2 text-sm font-medium text-white/80",children:["Idioma ",v?"(Cargando...)":`(${L.length} disponibles)`]}),e.jsx("select",{value:o.language,onChange:s=>f("language",s.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:L.length===0?e.jsx("option",{value:"",children:"Cargando idiomas..."}):L.map(s=>e.jsx("option",{value:s,children:O(s)},s))})]}),j&&e.jsx("div",{className:"text-sm text-yellow-400",children:j}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-white/80",children:"Voz"}),e.jsxs("select",{value:o.voiceName||"",onChange:s=>A(s.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecciona una voz"}),c.filter(s=>s.locale===o.language).map((s,t)=>e.jsx("option",{value:s.name,children:s.displayName?`${s.displayName} ${s.gender?`(${s.gender==="Female"?"Femenina":"Masculina"})`:""}`:`${s.name} ${s.gender?`(${s.gender==="Female"?"Femenina":"Masculina"})`:""}`},t))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-2 text-sm font-medium text-white/80",children:["Velocidad: ",o.rate,"x"]}),e.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:o.rate,onChange:s=>f("rate",parseFloat(s.target.value)),className:"w-full h-2 bg-white/20 rounded-lg appearance-none cursor-pointer slider"}),e.jsxs("div",{className:"flex justify-between text-xs text-white/60 mt-1",children:[e.jsx("span",{children:"0.5x"}),e.jsx("span",{children:"1x"}),e.jsx("span",{children:"2x"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-2 text-sm font-medium text-white/80",children:["Volumen: ",Math.round(o.volume*100),"%"]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:o.volume,onChange:s=>f("volume",parseFloat(s.target.value)),className:"w-full h-2 bg-white/20 rounded-lg appearance-none cursor-pointer slider"}),e.jsxs("div",{className:"flex justify-between text-xs text-white/60 mt-1",children:[e.jsx("span",{children:"0%"}),e.jsx("span",{children:"50%"}),e.jsx("span",{children:"100%"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-2 text-sm font-medium text-white/80",children:["Tono: ",o.pitch]}),e.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:o.pitch,onChange:s=>f("pitch",parseFloat(s.target.value)),className:"w-full h-2 bg-white/20 rounded-lg appearance-none cursor-pointer slider"}),e.jsxs("div",{className:"flex justify-between text-xs text-white/60 mt-1",children:[e.jsx("span",{children:"Bajo"}),e.jsx("span",{children:"Normal"}),e.jsx("span",{children:"Alto"})]})]}),e.jsxs("div",{className:"p-4 bg-white/5 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-white/80 mb-2",children:"Estado del Sistema"}),e.jsxs("div",{className:"text-xs text-white/60 space-y-1",children:[e.jsxs("div",{children:["Disponible: ",h.isAvailable?"âœ… SÃ­":"âŒ No"]}),e.jsxs("div",{children:["Reproduciendo: ",h.isSpeaking?"ðŸ”Š SÃ­":"ðŸ”‡ No"]}),e.jsxs("div",{children:["Voces disponibles: ",Array.isArray(h.availableVoices)?h.availableVoices.length:h.availableVoices||0]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(y,{onClick:C,disabled:v||!d,variant:"primary",children:v?"Probando...":"ðŸ”Š Probar Voz"}),e.jsx(y,{onClick:D,variant:"secondary",children:"ðŸ”„ Restaurar"})]}),j&&e.jsx(R,{intent:j.includes("Error")?"error":"success",children:j})]})]})}):e.jsxs(k,{children:[e.jsx(_,{children:e.jsx("h3",{className:"text-xl font-semibold",children:"ConfiguraciÃ³n de Voz"})}),e.jsx($,{children:e.jsx(R,{intent:"warning",children:"La funcionalidad de voz no estÃ¡ disponible en tu navegador. AsegÃºrate de usar un navegador compatible como Chrome, Firefox o Safari."})})]})}function ee(){const{user:d}=U(),{voiceInteractionsService:a}=H(),[u,S]=l.useState([]),[I,w]=l.useState({}),[o,i]=l.useState(!0),[c,E]=l.useState(""),[h,b]=l.useState(""),v=s=>s&&["voice_answer","voice_answer_assemblyai"].includes(s.action),x=s=>{if(!s)return!1;const t=s.metadata||{};return s.action==="voice_answer_assemblyai"||t.assemblyAIProcessed===!0||t.assemblyAIUsed===!0||t.assemblyAIResult&&t.assemblyAIResult.success===!0};l.useEffect(()=>{d&&(j(),r())},[d]);const j=async()=>{if(d){i(!0),E("");try{const s=await a.getUserVoiceHistory(d.uid);S(s)}catch(s){E("Error cargando el historial de voz"),console.error("Error loading voice history:",s)}finally{i(!1)}}},r=async()=>{if(d)try{const s=await a.getUserVoiceStats(d.uid);w(s)}catch(s){console.error("Error loading voice stats:",s)}},L=async()=>{if(d&&confirm("Â¿EstÃ¡s seguro de que quieres eliminar todo tu historial de voz? Esta acciÃ³n no se puede deshacer.")){i(!0),b("");try{await a.deleteUserVoiceHistory(d.uid),S([]),w({total:0,averageDuration:0}),b("Historial eliminado correctamente")}catch(s){E("Error eliminando el historial"),console.error("Error deleting voice history:",s)}finally{i(!1)}}},g=()=>{if(u.length===0){b("No hay historial para exportar");return}const s=JSON.stringify(u,null,2),t=new Blob([s],{type:"application/json"}),n=URL.createObjectURL(t),p=document.createElement("a");p.href=n,p.download=`voice-history-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(n),b("Historial exportado correctamente")},N=s=>s<1e3?`${s}ms`:`${(s/1e3).toFixed(1)}s`,f=s=>{if(!s)return"";if(typeof s=="object"&&s.seconds)return new Date(s.seconds*1e3).toLocaleString("es-ES");const t=new Date(s);return isNaN(t.getTime())?"":t.toLocaleString("es-ES")},A=u.filter(v).length,C=u.filter(s=>v(s)&&x(s)).length,D=s=>({question_read:"Lectura de pregunta",option_read:"Lectura de opciÃ³n",voice_answer:"Respuesta por voz",voice_answer_assemblyai:"Respuesta por voz (AssemblyAI)",settings_changed:"Cambio de configuraciÃ³n",tutorial_start:"Inicio de tutorial",tutorial_step:"Paso de tutorial",tutorial_end:"Fin de tutorial",text_read:"Lectura de texto"})[s]||s;return d?e.jsxs("div",{className:"space-y-6",children:[e.jsxs(k,{children:[e.jsx(_,{children:e.jsx("h3",{className:"text-xl font-semibold",children:"EstadÃ­sticas de Voz"})}),e.jsx($,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-white/5 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:I.total||0}),e.jsx("div",{className:"text-sm text-white/70",children:"Total de interacciones"})]}),e.jsxs("div",{className:"text-center p-4 bg-white/5 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:I.averageDuration?N(I.averageDuration):"0ms"}),e.jsx("div",{className:"text-sm text-white/70",children:"DuraciÃ³n promedio"})]}),e.jsxs("div",{className:"text-center p-4 bg-white/5 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-400",children:A}),e.jsx("div",{className:"text-sm text-white/70",children:"Respuestas por voz"})]}),e.jsxs("div",{className:"text-center p-4 bg-white/5 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-indigo-400",children:C}),e.jsx("div",{className:"text-sm text-white/70",children:"Resp. por voz (AssemblyAI)"})]})]})})]}),e.jsxs(k,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Historial de Interacciones"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{onClick:g,variant:"secondary",size:"sm",disabled:u.length===0,children:"ðŸ“¥ Exportar"}),e.jsx(y,{onClick:L,variant:"outline",size:"sm",disabled:u.length===0,children:"ðŸ—‘ï¸ Eliminar"})]})]})}),e.jsx($,{children:o?e.jsx(J,{}):c?e.jsx(R,{intent:"error",children:c}):u.length===0?e.jsxs("div",{className:"text-center py-8 text-white/60",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸŽ¤"}),e.jsx("p",{children:"No hay interacciones de voz registradas"}),e.jsx("p",{className:"text-sm",children:"Las interacciones aparecerÃ¡n aquÃ­ cuando uses el modo de voz"})]}):e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:u.map((s,t)=>e.jsxs("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("div",{className:"font-medium text-white/90",children:D(s.action)}),e.jsx("div",{className:"text-xs text-white/60",children:f(s.timestamp)})]}),s.voiceText&&e.jsxs("div",{className:"text-sm text-white/80 mb-2",children:['"',s.voiceText,'"']}),e.jsxs("div",{className:"flex justify-between items-center text-xs text-white/60",children:[e.jsx("div",{children:s.duration>0&&e.jsxs("span",{children:["DuraciÃ³n: ",N(s.duration)]})}),e.jsx("div",{children:s.confidence&&e.jsxs("span",{children:["Confianza: ",Math.round(s.confidence*100),"%"]})})]}),v(s)&&e.jsx("div",{className:"mt-2 text-xs",children:e.jsxs("span",{className:`inline-block px-2 py-1 rounded ${x(s)?"bg-green-500/20 text-green-300 border border-green-500/30":"bg-yellow-500/20 text-yellow-300 border border-yellow-500/30"}`,children:["AssemblyAI: ",x(s)?"SÃ­":"No"]})}),s.metadata&&Object.keys(s.metadata).length>0&&e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"text-xs text-white/60 cursor-pointer",children:"Ver detalles"}),e.jsx("pre",{className:"text-xs text-white/50 mt-1 p-2 bg-black/20 rounded",children:JSON.stringify(s.metadata,null,2)})]})]},t))})})]}),h&&e.jsx(R,{intent:h.includes("Error")?"error":"success",children:h})]}):e.jsx(k,{children:e.jsx($,{children:e.jsx(R,{intent:"warning",children:"Debes iniciar sesiÃ³n para ver tu historial de voz."})})})}const F=[{id:"welcome",title:"Bienvenido al Tutorial de Voz",content:"Te damos la bienvenida al tutorial de accesibilidad de BrainBlitz. Este tutorial te enseÃ±arÃ¡ cÃ³mo usar todas las funcionalidades de voz disponibles.",duration:8e3},{id:"voice_mode",title:"Modo de Voz",content:"El modo de voz se activa automÃ¡ticamente si indicaste tener dificultades visuales durante el registro. TambiÃ©n puedes activarlo manualmente desde la barra de navegaciÃ³n.",duration:1e4},{id:"question_reading",title:"Lectura de Preguntas",content:'Cuando aparezca una pregunta, se leerÃ¡ automÃ¡ticamente junto con todas las opciones de respuesta. TambiÃ©n puedes usar el botÃ³n "Leer" para repetir la pregunta.',duration:12e3},{id:"voice_settings",title:"ConfiguraciÃ³n de Voz",content:'Puedes personalizar la voz, velocidad, volumen y tono en la configuraciÃ³n. Usa el botÃ³n "Probar Voz" para escuchar cÃ³mo suenan los cambios.',duration:1e4},{id:"voice_answers",title:"Respuestas por Voz",content:'Puedes responder a las preguntas diciendo "A", "B", "C", "D" o "primera opciÃ³n", "segunda opciÃ³n", etc. El sistema reconocerÃ¡ tu respuesta.',duration:12e3},{id:"voice_history",title:"Historial de Voz",content:"Todas tus interacciones de voz se registran en tu historial personal. Puedes ver estadÃ­sticas de uso y exportar tus datos.",duration:8e3},{id:"navigation",title:"NavegaciÃ³n por Voz",content:"Usa los botones de navegaciÃ³n para moverte por la aplicaciÃ³n. El modo de voz te ayudarÃ¡ a entender quÃ© hace cada botÃ³n.",duration:8e3},{id:"completion",title:"Tutorial Completado",content:"Â¡Felicitaciones! Has completado el tutorial de accesibilidad. Ahora puedes disfrutar de BrainBlitz con todas las funcionalidades de voz activadas.",duration:6e3}];function se({onComplete:d,onSkip:a}){const{isVoiceModeEnabled:u,speak:S,stopSpeaking:I,isVoiceAvailable:w,voiceInteractionsService:o}=H(),{user:i}=U(),[c,E]=l.useState(0),[h,b]=l.useState(!1),[v,x]=l.useState(!1),[j,r]=l.useState(0),[L,g]=l.useState(!1),[N,f]=l.useState(""),A=F[c],C=c===F.length-1,D=c===0;l.useEffect(()=>{u&&w&&!h&&!v&&s()},[u,w]);const s=async()=>{if(!u){f("Activa el modo de voz para usar el tutorial");return}g(!0),f(""),b(!0),x(!1),r(0);try{o&&(i!=null&&i.uid)&&await o.logTutorialInteraction(i.uid,0,"start",0),await t(0)}catch(z){f("Error reproduciendo el tutorial: "+z.message),b(!1)}finally{g(!1)}},t=async(z=c)=>{const m=F[z],X=`${m.title}. ${m.content}`;o&&(i!=null&&i.uid)&&await o.logTutorialInteraction(i.uid,z,"step",m.duration);const K=setInterval(()=>{r(Q=>{const M=Q+100/(m.duration/100);return M>=100?100:M})},100);try{await S(X,{action:"tutorial_step",questionId:"tutorial",metadata:{stepId:m.id,stepTitle:m.title,stepIndex:z}})}finally{clearInterval(K),r(100)}},n=()=>{I(),x(!0),b(!1)},p=async()=>{x(!1),b(!0),await t()},T=()=>{I(),b(!1),x(!1),r(0)},P=async()=>{if(C){await B();return}E(z=>{const m=z+1;return r(0),h&&t(m),m})},V=async()=>{D||E(z=>{const m=z-1;return r(0),h&&t(m),m})},B=async()=>{g(!0);try{o&&(i!=null&&i.uid)&&await o.logTutorialInteraction(i.uid,c,"completed",0),await S("Tutorial completado. Â¡Disfruta de BrainBlitz!",{action:"tutorial_completed",questionId:"tutorial"}),d&&d()}catch(z){f("Error completando el tutorial: "+z.message)}finally{g(!1)}},G=()=>{T(),a&&a()};return w?u?e.jsxs(k,{children:[e.jsxs(_,{children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Tutorial de Accesibilidad"}),e.jsxs("p",{className:"text-white/70",children:["Paso ",c+1," de ",F.length,": ",A.title]})]}),e.jsxs($,{className:"space-y-6",children:[L&&e.jsx(J,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-white/70",children:[e.jsx("span",{children:"Progreso del paso"}),e.jsxs("span",{children:[Math.round(j),"%"]})]}),e.jsx("div",{className:"w-full bg-white/20 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${j}%`}})})]}),e.jsxs("div",{className:"p-4 bg-white/5 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-white/90 mb-2",children:A.title}),e.jsx("p",{className:"text-white/80 text-sm leading-relaxed",children:A.content})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[!h&&!v&&e.jsx(y,{onClick:s,variant:"primary",children:"â–¶ï¸ Iniciar Tutorial"}),h&&e.jsx(y,{onClick:n,variant:"secondary",children:"â¸ï¸ Pausar"}),v&&e.jsx(y,{onClick:p,variant:"primary",children:"â–¶ï¸ Continuar"}),(h||v)&&e.jsx(y,{onClick:T,variant:"outline",children:"â¹ï¸ Detener"}),!D&&e.jsx(y,{onClick:V,variant:"secondary",children:"â®ï¸ Anterior"}),!C&&e.jsx(y,{onClick:P,variant:"primary",children:"â­ï¸ Siguiente"}),C&&e.jsx(y,{onClick:B,variant:"primary",children:"âœ… Completar"}),e.jsx(y,{onClick:G,variant:"outline",children:"â­ï¸ Omitir Tutorial"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"flex gap-2",children:F.map((z,m)=>e.jsx("button",{onClick:()=>{E(()=>(r(0),h&&t(m),m))},className:`w-3 h-3 rounded-full transition-colors ${m===c?"bg-blue-500":m<c?"bg-green-500":"bg-white/30"}`,title:`Paso ${m+1}: ${F[m].title}`},m))})}),N&&e.jsx(R,{intent:"error",children:N})]})]}):e.jsx(k,{children:e.jsx($,{className:"p-6",children:e.jsx(R,{intent:"info",children:e.jsxs("div",{className:"space-y-4 p-4",children:[e.jsx("p",{className:"text-base leading-relaxed",children:"Activa el modo de voz para acceder al tutorial de accesibilidad."}),e.jsx(y,{onClick:()=>window.location.reload(),className:"mt-2",children:"Activar Modo de Voz"})]})})})}):e.jsx(k,{children:e.jsx($,{children:e.jsx(R,{intent:"warning",children:"El tutorial de voz no estÃ¡ disponible en tu navegador. AsegÃºrate de usar un navegador compatible como Chrome, Firefox o Safari."})})})}function le(){var L;const d=W(),{user:a}=U(),{userHasVisualDifficulty:u,isVoiceModeEnabled:S,toggleVoiceMode:I}=H(),[w,o]=l.useState(null),[i,c]=l.useState(""),[E,h]=l.useState(null),[b,v]=l.useState(!0),[x,j]=l.useState("profile");if(l.useEffect(()=>{async function g(){if(!a)return;let N=null;try{const f="http://localhost:5000",A=a&&await a.getIdToken(),C=await fetch(`${f}/api/users/me/stats?uid=${a.uid}`,{headers:{Authorization:A?`Bearer ${A}`:"","Content-Type":"application/json"}});C.ok?(N=await C.json(),h(N)):c(`Error HTTP: ${C.status}`)}catch(f){c("Error de conexiÃ³n: "+f.message)}o((N==null?void 0:N.stats)||null),v(!1)}g()},[a]),b)return e.jsx("div",{className:"px-4 py-10 min-h-screen container",children:e.jsx(k,{children:e.jsx($,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4","aria-busy":"true"}),e.jsx("p",{className:"text-white/70",children:"Cargando perfil..."})]})})})});const r=[{id:"profile",label:"Perfil",icon:"ðŸ‘¤"},{id:"voice-settings",label:"ConfiguraciÃ³n de Voz",icon:"ðŸŽ¤"},{id:"voice-history",label:"Historial de Voz",icon:"ðŸ“Š"},{id:"tutorial",label:"Tutorial",icon:"ðŸ“š"}];return e.jsx("div",{className:"container min-h-screen px-4 py-8 pt-24",children:e.jsxs("div",{className:"mx-auto max-w-4xl space-y-6",children:[e.jsx("div",{className:"flex items-center gap-4 mb-4",children:e.jsxs("button",{onClick:()=>d("/dashboard"),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white/70 hover:text-white bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-400","aria-label":"Volver al dashboard",children:[e.jsx("span",{className:"text-lg",children:"â†"}),e.jsx("span",{children:"Volver al Dashboard"})]})}),e.jsx(k,{children:e.jsxs(_,{className:"flex items-center gap-6 p-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:`https://api.dicebear.com/7.x/identicon/svg?seed=${(a==null?void 0:a.uid)||"user"}`,alt:"Avatar del usuario",className:"bg-white/10 rounded-full w-20 h-20 flex-shrink-0 border-2 border-white/20",loading:"lazy",decoding:"async"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-2 border-white/20 flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"font-bold text-2xl mb-2 text-white",children:(a==null?void 0:a.displayName)||(a==null?void 0:a.email)}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsxs("span",{className:"text-white/60 text-sm font-mono",children:["UID: ",(L=a==null?void 0:a.uid)==null?void 0:L.slice(0,8),"..."]}),u&&e.jsx("span",{className:"px-3 py-1 bg-blue-500/20 text-blue-300 text-xs rounded-full border border-blue-500/30",children:"â™¿ Accesibilidad habilitada"}),e.jsx("button",{onClick:I,className:`px-3 py-1 rounded-full text-xs font-semibold transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-400 ${S?"bg-green-500/20 text-green-300 border border-green-500/30":"bg-gray-500/20 text-gray-300 border border-gray-500/30 hover:bg-green-500/20 hover:text-green-300 hover:border-green-500/30"}`,"aria-pressed":S,type:"button",children:S?"ðŸŽ¤ Modo de voz activo":"ðŸŽ¤ Activar modo de voz"})]})]})]})}),e.jsx("div",{className:"flex flex-wrap gap-1 border-b border-white/10 bg-white/5 rounded-t-lg p-1",role:"tablist","aria-label":"NavegaciÃ³n del perfil",children:r.map(g=>e.jsxs("button",{onClick:()=>j(g.id),className:`px-4 py-3 text-sm font-medium transition-all duration-200 rounded-lg flex items-center gap-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 focus:ring-offset-gray-900 ${x===g.id?"bg-blue-500/20 text-blue-300 border border-blue-500/30 shadow-lg":"text-white/70 hover:text-white/90 hover:bg-white/10 border border-transparent"}`,role:"tab","aria-selected":x===g.id,"aria-controls":`tabpanel-${g.id}`,id:`tab-${g.id}`,children:[e.jsx("span",{className:"text-base","aria-hidden":"true",children:g.icon}),e.jsx("span",{children:g.label})]},g.id))}),x==="profile"&&e.jsxs(k,{role:"tabpanel",id:"tabpanel-profile","aria-labelledby":"tab-profile",children:[e.jsx(_,{className:"pb-4",children:e.jsxs("h3",{className:"text-xl font-semibold text-white flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:"ðŸ“Š"}),"EstadÃ­sticas del Juego"]})}),e.jsxs($,{children:[i&&e.jsx(R,{intent:"error",className:"mb-4",children:i}),e.jsxs("div",{className:"mb-6",children:[e.jsx(Y,{to:"/face-register",children:e.jsx(y,{variant:"secondary",size:"md",className:"w-full sm:w-auto",children:"ðŸ“¸ Registrar Reconocimiento Facial"})}),e.jsx("p",{className:"text-white/60 text-sm mt-2",children:"Habilita el login facial para acceder mÃ¡s rÃ¡pido a tu cuenta"})]}),w?e.jsxs("div",{className:"gap-4 grid grid-cols-1 sm:grid-cols-3",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-blue-600/20 px-6 py-5 border border-blue-500/20 rounded-xl hover:border-blue-400/30 transition-all duration-200 group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-blue-300 text-sm font-medium",children:"Partidas jugadas"}),e.jsx("span",{className:"text-blue-400 text-lg",children:"ðŸŽ®"})]}),e.jsx("div",{className:"font-bold text-3xl text-white group-hover:text-blue-100 transition-colors",children:w.gamesPlayed})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500/10 to-green-600/20 px-6 py-5 border border-green-500/20 rounded-xl hover:border-green-400/30 transition-all duration-200 group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-green-300 text-sm font-medium",children:"Victorias"}),e.jsx("span",{className:"text-green-400 text-lg",children:"ðŸ†"})]}),e.jsx("div",{className:"font-bold text-3xl text-white group-hover:text-green-100 transition-colors",children:w.wins})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-purple-600/20 px-6 py-5 border border-purple-500/20 rounded-xl hover:border-purple-400/30 transition-all duration-200 group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-purple-300 text-sm font-medium",children:"Respuestas correctas"}),e.jsx("span",{className:"text-purple-400 text-lg",children:"âœ…"})]}),e.jsx("div",{className:"font-bold text-3xl text-white group-hover:text-purple-100 transition-colors",children:w.correctAnswers})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“ˆ"}),e.jsx("p",{className:"text-white/70 text-lg mb-4",children:"No hay estadÃ­sticas disponibles"}),e.jsx("p",{className:"text-white/50 text-sm",children:"Â¡Juega algunas partidas para ver tus estadÃ­sticas aquÃ­!"}),E&&e.jsxs("details",{className:"mt-6",children:[e.jsx("summary",{className:"underline cursor-pointer text-blue-400 hover:text-blue-300",children:"Ver respuesta de la API"}),e.jsx("pre",{className:"bg-black/40 mt-3 p-4 rounded-xl overflow-auto text-xs text-white/80 border border-white/10",children:JSON.stringify(E,null,2)})]})]})]})]}),x==="voice-settings"&&e.jsx(Z,{}),x==="voice-history"&&e.jsx(ee,{}),x==="tutorial"&&e.jsx(se,{onComplete:()=>j("profile"),onSkip:()=>j("profile")})]})})}export{le as default};
//# sourceMappingURL=ProfilePage-Cm4nU0Dk.js.map
