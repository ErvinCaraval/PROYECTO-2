import{s as c,e as s,f as w}from"./index-C9CJCCGT.js";const n="http://localhost:5000/api";class f{async register(e,r,o,a=!1){try{const t=await fetch(`${n}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r,displayName:o,visualDifficulty:a})});if(!t.ok){const h=await t.json();throw new Error(h.error||"Registration failed")}const i=await t.json();return await c(s,i.token),i}catch(t){throw console.error("Registration error:",t),t}}async login(e,r){try{const o=await fetch(`${n}/auth/verify-credentials`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r})});if(!o.ok){const t=await o.json();throw new Error(t.error||"Login failed")}const a=await o.json();return await c(s,a.token),a}catch(o){throw console.error("Login error:",o),o}}async getIdToken(){if(!s.currentUser)throw new Error("No user logged in");return await s.currentUser.getIdToken()}async verifyToken(e){try{const r=await fetch(`${n}/auth/verify-token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idToken:e})});if(!r.ok){const o=await r.json();throw new Error(o.error||"Token verification failed")}return await r.json()}catch(r){throw console.error("Token verification error:",r),r}}async sendPasswordResetEmail(e){try{const r=await fetch(`${n}/auth/password-reset`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(!r.ok){const o=await r.json();throw new Error(o.error||"Password reset failed")}return await r.json()}catch(r){throw console.error("Password reset error:",r),r}}async updateProfile(e,r){try{const o=await fetch(`${n}/auth/profile`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(r)});if(!o.ok){const a=await o.json();throw new Error(a.error||"Profile update failed")}return await o.json()}catch(o){throw console.error("Profile update error:",o),o}}async getProfile(e){try{const r=await fetch(`${n}/auth/profile`,{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!r.ok){const o=await r.json();throw new Error(o.error||"Get profile failed")}return await r.json()}catch(r){throw console.error("Get profile error:",r),r}}async logout(){try{await w(s)}catch(e){throw console.error("Logout error:",e),e}}}const p=new f;export{p as b};
//# sourceMappingURL=backendAuthService-DBtrjOL4.js.map
