import{s as c,e as s,f as w}from"./index-B7SNj0r6.js";const a=()=>typeof window<"u"&&window.ENV?.VITE_API_URL?window.ENV.VITE_API_URL:typeof import.meta<"u"?"https://backend-v1-latest.onrender.com/api":"http://localhost:5000/api";class d{async register(o,r,e,n=!1){try{const t=await fetch(`${a()}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,password:r,displayName:e,visualDifficulty:n})});if(!t.ok){const h=await t.json();throw new Error(h.error||"Registration failed")}const i=await t.json();return await c(s,i.token),i}catch(t){throw console.error("Registration error:",t),t}}async login(o,r){try{const e=await fetch(`${a()}/auth/verify-credentials`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,password:r})});if(!e.ok){const t=await e.json();throw new Error(t.error||"Login failed")}const n=await e.json();return await c(s,n.token),n}catch(e){throw console.error("Login error:",e),e}}async getIdToken(){if(!s.currentUser)throw new Error("No user logged in");return await s.currentUser.getIdToken()}async verifyToken(o){try{const r=await fetch(`${a}/auth/verify-token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idToken:o})});if(!r.ok){const e=await r.json();throw new Error(e.error||"Token verification failed")}return await r.json()}catch(r){throw console.error("Token verification error:",r),r}}async sendPasswordResetEmail(o){try{const r=await fetch(`${a}/auth/password-reset`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o})});if(!r.ok){const e=await r.json();throw new Error(e.error||"Password reset failed")}return await r.json()}catch(r){throw console.error("Password reset error:",r),r}}async updateProfile(o,r){try{const e=await fetch(`${a}/auth/profile`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(r)});if(!e.ok){const n=await e.json();throw new Error(n.error||"Profile update failed")}return await e.json()}catch(e){throw console.error("Profile update error:",e),e}}async getProfile(o){try{const r=await fetch(`${a}/auth/profile`,{method:"GET",headers:{Authorization:`Bearer ${o}`}});if(!r.ok){const e=await r.json();throw new Error(e.error||"Get profile failed")}return await r.json()}catch(r){throw console.error("Get profile error:",r),r}}async logout(){try{await w(s)}catch(o){throw console.error("Logout error:",o),o}}}const l=new d;export{l as b};
//# sourceMappingURL=backendAuthService-DPHdF-jw.js.map
